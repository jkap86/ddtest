{"ast":null,"code":"'use strict';\n\nvar utils = require('../utils');\n\nvar add = require('./add');\n\nvar parse = require('./parse'); // exported\n\n\nvar rules = {\n  ignore: [],\n  watch: []\n};\n/**\n * Loads a nodemon config file and populates the ignore\n * and watch rules with it's contents, and calls callback\n * with the new rules\n *\n * @param  {String} filename\n * @param  {Function} callback\n */\n\nfunction load(filename, callback) {\n  parse(filename, function (err, result) {\n    if (err) {\n      // we should have bombed already, but\n      utils.log.error(err);\n      callback(err);\n    }\n\n    if (result.raw) {\n      result.raw.forEach(add.bind(null, rules, 'ignore'));\n    } else {\n      result.ignore.forEach(add.bind(null, rules, 'ignore'));\n      result.watch.forEach(add.bind(null, rules, 'watch'));\n    }\n\n    callback(null, rules);\n  });\n}\n\nmodule.exports = {\n  reset: function () {\n    // just used for testing\n    rules.ignore.length = rules.watch.length = 0;\n    delete rules.ignore.re;\n    delete rules.watch.re;\n  },\n  load: load,\n  ignore: {\n    test: add.bind(null, rules, 'ignore'),\n    add: add.bind(null, rules, 'ignore')\n  },\n  watch: {\n    test: add.bind(null, rules, 'watch'),\n    add: add.bind(null, rules, 'watch')\n  },\n  add: add.bind(null, rules),\n  rules: rules\n};","map":{"version":3,"names":["utils","require","add","parse","rules","ignore","watch","load","filename","callback","err","result","log","error","raw","forEach","bind","module","exports","reset","length","re","test"],"sources":["/Users/dev/react/ddtest/node_modules/nodemon/lib/rules/index.js"],"sourcesContent":["'use strict';\nvar utils = require('../utils');\nvar add = require('./add');\nvar parse = require('./parse');\n\n// exported\nvar rules = { ignore: [], watch: [] };\n\n/**\n * Loads a nodemon config file and populates the ignore\n * and watch rules with it's contents, and calls callback\n * with the new rules\n *\n * @param  {String} filename\n * @param  {Function} callback\n */\nfunction load(filename, callback) {\n  parse(filename, function (err, result) {\n    if (err) {\n      // we should have bombed already, but\n      utils.log.error(err);\n      callback(err);\n    }\n\n    if (result.raw) {\n      result.raw.forEach(add.bind(null, rules, 'ignore'));\n    } else {\n      result.ignore.forEach(add.bind(null, rules, 'ignore'));\n      result.watch.forEach(add.bind(null, rules, 'watch'));\n    }\n\n    callback(null, rules);\n  });\n}\n\nmodule.exports = {\n  reset: function () { // just used for testing\n    rules.ignore.length = rules.watch.length = 0;\n    delete rules.ignore.re;\n    delete rules.watch.re;\n  },\n  load: load,\n  ignore: {\n    test: add.bind(null, rules, 'ignore'),\n    add: add.bind(null, rules, 'ignore'),\n  },\n  watch: {\n    test: add.bind(null, rules, 'watch'),\n    add: add.bind(null, rules, 'watch'),\n  },\n  add: add.bind(null, rules),\n  rules: rules,\n};"],"mappings":"AAAA;;AACA,IAAIA,KAAK,GAAGC,OAAO,CAAC,UAAD,CAAnB;;AACA,IAAIC,GAAG,GAAGD,OAAO,CAAC,OAAD,CAAjB;;AACA,IAAIE,KAAK,GAAGF,OAAO,CAAC,SAAD,CAAnB,C,CAEA;;;AACA,IAAIG,KAAK,GAAG;EAAEC,MAAM,EAAE,EAAV;EAAcC,KAAK,EAAE;AAArB,CAAZ;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,IAAT,CAAcC,QAAd,EAAwBC,QAAxB,EAAkC;EAChCN,KAAK,CAACK,QAAD,EAAW,UAAUE,GAAV,EAAeC,MAAf,EAAuB;IACrC,IAAID,GAAJ,EAAS;MACP;MACAV,KAAK,CAACY,GAAN,CAAUC,KAAV,CAAgBH,GAAhB;MACAD,QAAQ,CAACC,GAAD,CAAR;IACD;;IAED,IAAIC,MAAM,CAACG,GAAX,EAAgB;MACdH,MAAM,CAACG,GAAP,CAAWC,OAAX,CAAmBb,GAAG,CAACc,IAAJ,CAAS,IAAT,EAAeZ,KAAf,EAAsB,QAAtB,CAAnB;IACD,CAFD,MAEO;MACLO,MAAM,CAACN,MAAP,CAAcU,OAAd,CAAsBb,GAAG,CAACc,IAAJ,CAAS,IAAT,EAAeZ,KAAf,EAAsB,QAAtB,CAAtB;MACAO,MAAM,CAACL,KAAP,CAAaS,OAAb,CAAqBb,GAAG,CAACc,IAAJ,CAAS,IAAT,EAAeZ,KAAf,EAAsB,OAAtB,CAArB;IACD;;IAEDK,QAAQ,CAAC,IAAD,EAAOL,KAAP,CAAR;EACD,CAfI,CAAL;AAgBD;;AAEDa,MAAM,CAACC,OAAP,GAAiB;EACfC,KAAK,EAAE,YAAY;IAAE;IACnBf,KAAK,CAACC,MAAN,CAAae,MAAb,GAAsBhB,KAAK,CAACE,KAAN,CAAYc,MAAZ,GAAqB,CAA3C;IACA,OAAOhB,KAAK,CAACC,MAAN,CAAagB,EAApB;IACA,OAAOjB,KAAK,CAACE,KAAN,CAAYe,EAAnB;EACD,CALc;EAMfd,IAAI,EAAEA,IANS;EAOfF,MAAM,EAAE;IACNiB,IAAI,EAAEpB,GAAG,CAACc,IAAJ,CAAS,IAAT,EAAeZ,KAAf,EAAsB,QAAtB,CADA;IAENF,GAAG,EAAEA,GAAG,CAACc,IAAJ,CAAS,IAAT,EAAeZ,KAAf,EAAsB,QAAtB;EAFC,CAPO;EAWfE,KAAK,EAAE;IACLgB,IAAI,EAAEpB,GAAG,CAACc,IAAJ,CAAS,IAAT,EAAeZ,KAAf,EAAsB,OAAtB,CADD;IAELF,GAAG,EAAEA,GAAG,CAACc,IAAJ,CAAS,IAAT,EAAeZ,KAAf,EAAsB,OAAtB;EAFA,CAXQ;EAefF,GAAG,EAAEA,GAAG,CAACc,IAAJ,CAAS,IAAT,EAAeZ,KAAf,CAfU;EAgBfA,KAAK,EAAEA;AAhBQ,CAAjB"},"metadata":{},"sourceType":"script"}